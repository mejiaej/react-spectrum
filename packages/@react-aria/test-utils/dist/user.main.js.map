{"mappings":";;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;CAUC;;;;;;;AAyBD,IAAI,kCAAY;IAAC,UAAU,CAAA,GAAA,sCAAW;IAAG,SAAS,CAAA,GAAA,qCAAU;IAAG,QAAQ,CAAA,GAAA,oCAAS;IAAG,YAAY,CAAA,GAAA,wCAAa;IAAG,YAAY,CAAA,GAAA,wCAAa;AAAC;AAoBzI,IAAI,4CAAsB,OAAO,WAAiC,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;AAE9G,MAAM;IAYX,aAAqC,WAAc,EAAE,IAA2B,EAAiB;QAC/F,OAAO,IAAI,AAAC,+BAAU,CAAC,YAAY,CAAC;YAAC,MAAM,IAAI,CAAC,IAAI;YAAE,iBAAiB,IAAI,CAAC,eAAe;YAAE,cAAc,IAAI,CAAC,YAAY;YAAE,GAAG,IAAI;QAAA;IACvI;IATA,YAAY,OAAiB,CAAC,CAAC,CAAE;QAC/B,IAAI,mBAAC,eAAe,gBAAE,YAAY,EAAC,GAAG;QACtC,IAAI,CAAC,IAAI,GAAG,CAAA,GAAA,wDAAQ,EAAE,KAAK,CAAC;YAAC,OAAO;wBAAM;QAAU;QACpD,IAAI,CAAC,eAAe,GAAG;QACvB,IAAI,CAAC,YAAY,GAAG,gBAAgB;IACtC;AAKF","sources":["packages/@react-aria/test-utils/src/user.ts"],"sourcesContent":["/*\n * Copyright 2024 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {ComboBoxOptions, ComboBoxTester} from './combobox';\nimport {GridListOptions, GridListTester} from './gridlist';\nimport {MenuOptions, MenuTester} from './menu';\nimport {pointerMap} from './';\nimport {SelectOptions, SelectTester} from './select';\nimport {TableOptions, TableTester} from './table';\nimport userEvent from '@testing-library/user-event';\n\n// https://github.com/testing-library/dom-testing-library/issues/939#issuecomment-830771708 is an interesting way of allowing users to configure the timers\n// curent way is like https://testing-library.com/docs/user-event/options/#advancetimers,\nexport interface UserOpts {\n  interactionType?: 'mouse' | 'touch' | 'keyboard',\n  // If using fake timers user should provide something like (time) => jest.advanceTimersByTime(time))}\n  // A real timer user would pass async () => await new Promise((resolve) => setTimeout(resolve, waitTime))\n  // Time is in ms.\n  advanceTimer?: (time?: number) => void | Promise<unknown>\n}\n\nexport interface BaseTesterOpts {\n  // The base element for the given tester (e.g. the table, menu trigger, etc)\n  root: HTMLElement\n}\n\nlet keyToUtil = {'Select': SelectTester, 'Table': TableTester, 'Menu': MenuTester, 'ComboBox': ComboBoxTester, 'GridList': GridListTester} as const;\nexport type PatternNames = keyof typeof keyToUtil;\n\n// Conditional type: https://www.typescriptlang.org/docs/handbook/2/conditional-types.html\ntype ObjectType<T> =\n    T extends 'Select' ? SelectTester :\n    T extends 'Table' ? TableTester :\n    T extends 'Menu' ? MenuTester :\n    T extends 'ComboBox' ? ComboBoxTester :\n    T extends 'GridList' ? GridListTester :\n    never;\n\ntype ObjectOptionsTypes<T> =\n  T extends 'Select' ? SelectOptions :\n  T extends 'Table' ? TableOptions :\n  T extends 'Menu' ? MenuOptions :\n  T extends 'ComboBox' ? ComboBoxOptions :\n  T extends 'GridList' ? GridListOptions :\n  never;\n\nlet defaultAdvanceTimer = async (waitTime: number | undefined) => await new Promise((resolve) => setTimeout(resolve, waitTime));\n\nexport class User {\n  user;\n  interactionType: UserOpts['interactionType'];\n  advanceTimer: UserOpts['advanceTimer'];\n\n  constructor(opts: UserOpts = {}) {\n    let {interactionType, advanceTimer} = opts;\n    this.user = userEvent.setup({delay: null, pointerMap});\n    this.interactionType = interactionType;\n    this.advanceTimer = advanceTimer || defaultAdvanceTimer;\n  }\n\n  createTester<T extends PatternNames>(patternName: T, opts: ObjectOptionsTypes<T>): ObjectType<T> {\n    return new (keyToUtil)[patternName]({user: this.user, interactionType: this.interactionType, advanceTimer: this.advanceTimer, ...opts}) as ObjectType<T>;\n  }\n}\n"],"names":[],"version":3,"file":"user.main.js.map"}